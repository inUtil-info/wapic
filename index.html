<!DOCTYPE html>
<html>
<head>
	<title>Mi Formulario</title>
	<meta charset="utf-8">
</head>
<body>
	<form id="myForm">
		<fieldset>
			<legend>Formulario</legend>
			<label>Token:</label>
			<input type="text" name="token" required><br><br>
			<button type="button" onclick="next()">Siguiente</button>
		</fieldset>
		<fieldset id="second" style="display: none">
			<legend>Formulario</legend>
			<label>Tel√©fono:</label>
			<input type="text" name="phone" required><br><br>
			<button type="button" onclick="submitForm()">Enviar</button>
		</fieldset>
	</form>
	<div id="response"></div>
	<div id="imageContainer"></div>
	<script>
		function next() {
			document.getElementById('myForm').firstElementChild.style.display = 'none';
			document.getElementById('second').style.display = 'block';
		}

		function submitForm() {
			const form = document.getElementById('myForm');
			const token = form.elements['token'].value;
			const phone = form.elements['phone'].value;

			const xhr = new XMLHttpRequest();
			xhr.open("GET", `https://whatsapp-scraper.p.rapidapi.com/free/wspicture?phone=${phone}&token=${token}`);
			xhr.setRequestHeader("content-type", "application/octet-stream");
			xhr.setRequestHeader("X-RapidAPI-Key", "0b2157bfc4mshe1bc5572ac284d7p17fde2jsnadff8abf693a");
			xhr.setRequestHeader("X-RapidAPI-Host", "whatsapp-scraper.p.rapidapi.com");

			xhr.onreadystatechange = function() {
				if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
					const response = JSON.parse(this.responseText);
					if (response.success) {
						const img = document.createElement('img');
						img.src = response.data;
						document.getElementById('imageContainer').appendChild(img);
					} else {
						document.getElementById('response').innerHTML = response.message;
					}
				}
			}

			xhr.send();
			document.getElementById('second').style.display = 'none';
		}
	</script>
</body>
</html>
