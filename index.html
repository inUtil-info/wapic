<!DOCTYPE html>
<html>
<head>
	<title>Ejemplo de llamada a API con JavaScript</title>
</head>
<body>

	<h1>Imagen de WhatsApp</h1>

	<div>
		<label for="telefono">Ingresa el número de teléfono:</label>
		<input type="text" id="telefono" name="telefono">
		<button id="btn-consultar">Consultar</button>
	</div>

	<img id="whatsapp-image" src="" alt="Imagen de WhatsApp">

	<script>

		// Agregamos un event listener al botón para que cuando se haga clic, se haga la llamada a la API
		document.getElementById('btn-consultar').addEventListener('click', () => {

			// Obtenemos el número de teléfono ingresado por el usuario
			const telefono = document.getElementById('telefono').value;

			// Definimos la URL del API con el número de teléfono ingresado
			const url = `https://whatsapp-scraper.p.rapidapi.com/wspicture?phone=${telefono}`;

			// Definimos las opciones de la llamada
			const options = {
				method: 'GET',
				headers: {
					'content-type': 'application/octet-stream',
					'X-RapidAPI-Key': '41cc7ae519mshec0ca58538fbba6p1185d1jsn5da840d814c0',
					'X-RapidAPI-Host': 'whatsapp-scraper.p.rapidapi.com'
				}
			};

			// Hacemos la llamada a la API con fetch
			fetch(url, options)
				.then(response => {
					if (!response.ok) {
						throw new Error('La respuesta no es OK');
					}
					return response.url;
				})
				.then(imageUrl => {
					// Asignamos la URL de la imagen al src de la etiqueta img
					const whatsappImage = document.getElementById('whatsapp-image');
					whatsappImage.src = imageUrl;
				})
				.catch(error => {
					console.error(error);
				});

		});

	</script>

</body>
</html>


