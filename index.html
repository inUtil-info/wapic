<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Ejemplo de API con imagen</title>
  </head>
  <body>
    <form>
      <label for="telefono">Introduce el número de teléfono:</label><br>
      <input type="text" id="telefono" name="telefono"><br>
      <label for="token">Introduce el token:</label><br>
      <input type="text" id="token" name="token"><br>
      <button type="button" onclick="buscarImagen()">Buscar imagen</button>
    </form>
    <div id="respuesta"></div>
    <div id="imagen"></div>
    <script>
      async function buscarImagen() {
        const telefono = document.getElementById('telefono').value;
        const token = document.getElementById('token').value;
        const url = `https://whatsapp-scraper.p.rapidapi.com/free/wspicture?phone=${telefono}&token=${token}`;
        const options = {
          method: 'GET',
          headers: {
            'content-type': 'application/octet-stream',
            'X-RapidAPI-Key': '0b2157bfc4mshe1bc5572ac284d7p17fde2jsnadff8abf693a',
            'X-RapidAPI-Host': 'whatsapp-scraper.p.rapidapi.com'
          }
        };

        try {
          const response = await fetch(url, options);
          const imagenUrl = await response.text();
          document.getElementById('respuesta').innerHTML = `La URL de la imagen es: ${imagenUrl}`;
          const imagenDiv = document.getElementById('imagen');
          imagenDiv.innerHTML = '';
          const imagen = new Image();
          imagen.onload = function() {
            imagenDiv.appendChild(imagen);
          };
          imagen.src = imagenUrl;
        } catch (error) {
          console.error(error);
        }
      }
    </script>
  </body>
</html>
